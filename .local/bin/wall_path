#!/usr/bin/env fish
# Print full path of wallpaper by index (1..8 / 001..008), matching any supported extension.
# Uses the same directory and extensions as the `wall` script.

if test (count $argv) -lt 1
  echo "Usage: wall_path <1..8 | 001..008>"
  exit 1
end

if set -q WALL_DIR
  set dir "$WALL_DIR"
else
  set dir "$HOME/Pictures/wallpapers/quick"
end

set raw $argv[1]
if not string match -rq '^[0-9]+$' -- $raw
  echo "Error: index must be numeric (1..8 or 001..008)" >&2
  exit 1
end
set n (math "$raw + 0")
if test $n -lt 1 -o $n -gt 8
  echo "Error: index out of range (1..8)" >&2
  exit 1
end
set num (printf "%03d" $n)

set exts jpg JPG jpeg JPEG png PNG webp WEBP avif AVIF bmp BMP
for ext in $exts
  set candidate "$dir/$num.$ext"
  if test -f "$candidate"
    echo "$candidate"
    exit 0
  end
end

for candidate in $dir/$num.*
  if test -f "$candidate"
    echo "$candidate"
    exit 0
  end
end

echo "Error: not found: $dir/$num.(jpg|jpeg|png|webp|avif|bmp)" >&2
exit 1
